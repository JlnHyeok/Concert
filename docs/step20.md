# 가상 장애 대응 보고서: 로드 밸런싱을 통한 서비스 장애 대응

## 1. 개요

2024년 11월 28일, 예상보다 많은 동시 접속자가 발생하면서 서비스의 일부 시스템에서 장애가 발생했습니다. 기존 서버에는 로드 밸런싱이 적용되지 않았고, 트래픽을 적절히 분산시킬 방법이 없었던 것이 주된 원인이었습니다. 이로 인해 서버에 과도한 부하가 발생하며, 일부 서비스가 장애를 일으켰습니다. 본 보고서는 로드 밸런싱이 적용되지 않은 상태에서 발생한 장애 원인과 이를 해결한 과정을 다루고 있습니다.

## 2. 장애 발생 원인

서비스에 예상보다 많은 트래픽이 발생하면서, **서버에 과도한 부하**가 걸렸습니다. 로드 밸런서가 없었기 때문에 모든 트래픽이 **단일 서버**에 집중되어 서버 자원(CPU, 메모리)이 부족해졌습니다. 이로 인해 서버의 응답 시간이 급격히 증가하고, 서비스 요청에 대한 처리가 지연되었으며, 결국 **서비스 장애**가 발생하게 되었습니다.

- **부하 발생 원인**: 로드 밸런서 미적용으로 서버에 트래픽이 집중.
- **결과**: 서버 과부하, 응답 시간 지연, 서비스 불가.

## 3. 문제 발생 상황

- **문제**: 트래픽이 단일 서버에 집중되어 서버 과부하 발생.
- **원인**: 로드 밸런싱이 적용되지 않아서 모든 요청이 한 서버로 몰림.
- **결과**: 서버 자원 고갈로 서비스 장애 발생.

## 4. 장애 대응 절차

### 4.1. 초기 대응

장애가 발생한 직후, 시스템 모니터링 도구를 통해 서버에 과도한 부하가 발생한 사실을 확인했습니다. **실시간 로그 분석**을 통해 서버 자원(CPU, 메모리)의 부족 상태를 파악하고, 로드 밸런서를 즉시 **도입**하기로 결정했습니다.

### 4.2. 로드 밸런서 도입 및 설정

새로 도입한 로드 밸런서를 통해 트래픽 분배를 시작했습니다. 이를 위해:

- **라운드 로빈(원형) 방식**으로 트래픽을 균등하게 분배.
- 로드 밸런서에 **서버 상태 모니터링** 기능을 추가하여 과부하가 발생한 서버를 자동으로 감지하고 트래픽을 우회시킴.
- **세션 지속성**을 설정하여 한 사용자의 트래픽이 특정 서버에 집중되도록 했습니다.

### 4.3. 서버 자원 확장

장애를 완전히 해결하기 위해, 클라우드 환경에서 **자동 스케일링**을 활성화하여 트래픽이 급증할 때 추가 서버가 자동으로 배치되도록 했습니다. 이를 통해, 서비스가 **부하를 처리할 수 있는 능력**을 대폭 확장했습니다. 트래픽 증가에 맞춰 **서버 수를 조정**하여 과부하를 방지했습니다.

### 4.4. 부하 분산 최적화

부하 분산의 효율성을 더욱 높이기 위해 다음과 같은 추가적인 최적화를 진행했습니다:

- **캐시 서버 추가**: 자주 조회되는 데이터를 캐시 서버에 저장하여 데이터베이스에 가해지는 부하를 줄였습니다.
- **세션 관리**: 서버 간 세션 정보가 유실되지 않도록 **세션 스토리지**를 분리하여, 모든 서버에서 세션을 공유할 수 있도록 설정했습니다.

### 4.5. 모니터링 및 실시간 피드백 시스템 구축

장애 발생 이후, **모니터링 시스템**을 강화하여 로드 밸런서의 트래픽 분배 상태와 각 서버의 자원 사용 현황을 실시간으로 추적할 수 있도록 했습니다. 이를 통해 문제가 발생했을 때 즉각적인 대응이 가능하도록 했습니다.

## 5. 결과 및 향후 개선 사항

### 5.1. 장애 해결

로드 밸런서를 도입하고 서버 확장을 통해, 트래픽 분배를 적절히 조정하여 **서비스 장애를 해결**했습니다. 이후, 부하 테스트를 정상적으로 진행할 수 있었고, 목표 응답 시간을 유지하며 시스템 안정성을 확보했습니다.

### 5.2. 향후 개선 사항

- **자동화된 로드 밸런서 설정**: 트래픽 급증 상황에 맞춰 로드 밸런서 설정을 자동으로 조정하는 기능을 강화할 계획입니다.
- **서버 확장성 향상**: 예상보다 많은 사용자가 접속할 경우에 대비해, 서버 자원을 **더욱 유연하게 확장**할 수 있도록 검토 중입니다.
- **부하 테스트 개선**: 더 많은 사용자가 동시에 접속하는 상황을 대비하여, **정확한 부하 예측**을 통해 시스템을 더욱 견고하게 만들겠습니다.

## 6. 결론

기존에 로드 밸런싱을 적용하지 않았던 상태에서 발생한 서비스 장애는 **트래픽 집중**으로 인해 발생한 과도한 서버 부하가 원인입니다. 장애 발생 후 **로드 밸런서 도입**, **서버 확장** 및 **부하 분산 최적화** 등의 방법으로 문제를 해결했습니다. 향후 같은 문제가 발생하지 않도록 **자동화된 로드 밸런서 설정**과 **모니터링 시스템**을 강화하여 서비스의 **가용성**과 **안정성**을 더욱 높이겠습니다.
